{% extends 'base.html.twig' %}
{% import 'macros/list_macros.html.twig' as macros %}

{% block body %}
<div class="container mt-4">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ path('app_home') }}">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ critic.name }}</li>
      </ol>
    </nav>

    <h1>{{ critic.name }}</h1>
    
    <div class="mb-3">
        {% for genre in critic.genres %}
            <span class="badge bg-secondary">{{ genre.name }}</span>
        {% endfor %}
        {% for feature in critic.features %}
            <span class="badge bg-info text-dark">{{ feature.name }}</span>
        {% endfor %}
    </div>

    <div class="mb-3 text-muted">
        {% if critic.birthYear %}
            <span class="me-3"><i class="fas fa-star me-1"></i> Geboren: {{ critic.birthYear }}</span>
        {% endif %}
        {% if critic.deathYear %}
            <span class="me-3"><i class="fas fa-cross me-1"></i> Overleden: {{ critic.deathYear }}</span>
        {% endif %}
    </div>

    <div class="mb-4">
        {% if critic.url %}
            <a href="{{ critic.url }}" target="_blank" class="btn btn-outline-primary btn-sm me-2">
                <i class="fas fa-globe me-1"></i> Website
            </a>
        {% endif %}
        {% if critic.wikipediaUrl %}
            <a href="{{ critic.wikipediaUrl }}" target="_blank" class="btn btn-outline-secondary btn-sm">
                <i class="fab fa-wikipedia-w me-1"></i> Wikipedia
            </a>
        {% endif %}
    </div>

    {% if critic.bio %}
        <div class="card mb-4">
            <div class="card-body">
                <p class="card-text">{{ critic.bio|nl2br }}</p>
            </div>
        </div>
    {% endif %}

    <div class="row mt-4">
        <div class="col-md-6">
            <h3>Lijsten</h3>
            {% if critic.albumLists is not empty %}
                <div class="list-group mb-4">
                    {% for list in critic.albumLists %}
                        {{ macros.list_card(list, album_cover_base_url) }}
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-muted">Geen lijsten gevonden voor deze recensent.</p>
            {% endif %}
        </div>

        <div class="col-md-6">
            <h3>Recensies</h3>
            {% if critic.reviews is not empty %}
                <div class="list-group mb-4">
                    {% for review in critic.reviews %}
                        <a href="{{ path('app_album_show', {id: review.album.id}) }}" class="list-group-item list-group-item-action d-flex align-items-center">
                            <div class="flex-shrink-0 me-3" style="width: 50px;">
                                {% if review.album.imageUrl %}
                                    <img src="{{ album_cover_base_url ~ review.album.imageUrl }}" 
                                         alt="{{ review.album.title }}" 
                                         class="img-fluid rounded" 
                                         style="width: 50px; height: 50px; object-fit: cover;">
                                {% else %}
                                    <div class="bg-light border rounded d-flex align-items-center justify-content-center text-muted small" 
                                         style="width: 50px; height: 50px; font-size: 0.6rem;">
                                        No Img
                                    </div>
                                {% endif %}
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">{{ review.album.title }}</h5>
                                    <small>
                                        {% if review.rating %}
                                            <span class="badge bg-primary">{{ review.rating }}</span>
                                        {% endif %}
                                    </small>
                                </div>
                                <p class="mb-1">
                                    door {{ review.album.artist.name }}
                                </p>
                                <small class="text-muted">
                                    {% if review.year %}
                                        {{ review.year }}
                                    {% endif %}
                                    {% if review.magazine %}
                                        in {{ review.magazine.name }}
                                    {% endif %}
                                </small>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-muted">Geen recensies gevonden voor deze recensent.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

